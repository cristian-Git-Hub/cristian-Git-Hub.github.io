<!DOCTYPE html>
<html lang="en">
<head>
  <meta name=”viewport” content=”width=device-width, initial-scale=1″>
  <title>Next Project - Fall '24 - WebPage</title>
  <link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>
  <div class="top-row">
    <div class="top-left">
      <button id="start"> Play </button>
      <button id="stop"> Pause </button>
    </div>
    <div class="top-right">
      <div class="title"></div>
    </div>
  </div>
  <div class="middle-row">
    <div class="middle-left">
      <div>
        <select id="select-box">
          <option value="">Interval</option>
          <option value="3"> 3 </option>
          <option value="6"> 6 </option>
          <option value="9"> 9 </option>
        </select>
      </div>
    </div>
    <div class="middle-right">
      <div class="info">
      <label class="status"></label>
    </div>
    </div>
  </div>
  <div class="container">
    <div class="pictures"></div>
    <div class="pictures"></div>
    <div class="pictures"></div>
  </div>

<script>
    // gobals, gather all of the DOM elements we will be working with.
const title = document.querySelector(".title");
const pictures = document.querySelectorAll(".pictures");
const stop = document.getElementById("stop");
const start = document.getElementById("start");
const statusbar = document.querySelector(".status");
var count = 0;
let interval = 6000;
let intervalId // important: used to trac the correct setInterval method. 

// create an h2 element for the titile
h2 = document.createElement("h2");
h2.innerText = "Next Chapter Fall/Winter '24 - Project";
title.appendChild(h2); // append title info



// FUNCTIONS

// start function. 
function startIntervalTime(curTime) {
  console.log(curTime)
  statusbar.innerText = "Changing pictures every " + curTime / 1000 + " seconds";
  return setInterval(myCycle, curTime) 
}

// stop funciton
function stopIntervalTime(curId) {
  statusbar.innerText = "Picture interval Paused";
  clearInterval(curId)
}

// reset function
function resetIntervalTime(curId,curTime) {
  console.log(curTime)
  stopIntervalTime(curId);
  statusbar.innerText = "Changing pictures every " + curTime / 1000 + " seconds";
  return setInterval(myCycle, curTime)
}

// main function
function myCycle() {
  // use the DOM objects to display the information.
  let initMax = 33;
  pictures.forEach(function(pic, index) {
    let eleWidth = pic.offsetWidth;
    let eleHeight = pic.offsetHeight;
    console.log("offsetWidth: " + eleWidth)
    console.log("offsetHeight: " + eleHeight)
    // create random number
    var rand = Math.floor(Math.random() * (initMax - (initMax - 32)) + (initMax - 32));
    //create url - width & height
    let imgURL = 'https://picsum.photos/'+eleWidth+'/'+eleHeight+'?random='+rand;
    pic.style.backgroundImage = "url(" + imgURL + ")";
    initMax += 33;
  });
}

// LISTENERS

// on page load listener
window.addEventListener("load",
  e => {
    myCycle(); // load page with pictures 
    intervalId = startIntervalTime(interval);
    console.log("on load intervalId: " + intervalId)
  },
);

// stop button listener.
stop.addEventListener("click", 
  e => {
    stopIntervalTime(intervalId)
  });

// start button listener
start.addEventListener("click", e => {
  intervalId = startIntervalTime(interval);
});

// select box listener.
document.getElementById("select-box").addEventListener("change", function() {
  let seconds = this.value // selection value from the select box.
  interval = seconds * 1000;
  intervalId = resetIntervalTime(intervalId, interval)
});

</script>

</body>

</html>
